-attrs={}
-attrs.card="cardCreator.previewCard"
-attrs.series="cardCreator.series"
-attrs['on-edit']="cardCreator.mode='editor';cardCreator.card=cardCreator.previewCard;cardCreator.previewCard=null"
aotp-card-white-out-modal&attributes(attrs)

|{{cardCreator.showRefWarning}}
white-out-modal(show="cardCreator.showRefWarning")
  div(style="max-width:600px;background-color:white;border-radius:15px;border:1px solid #999999;padding:2%;")
    h2
      i.fa.fa-link
      |&nbsp;Series has External References
    .text-xs
      p.text-muted The series you are viewing, has externally referenced items, links.
      br
      i.fa.fa-exclamation-triangle
      |&nbsp;Please note:
      li Linked items, such as images, may fail over time #[i.fa.fa-unlink]
      li The linked items may have already lost their reference #[i.fa.fa-unlink]
      li The linked items may have possibly been replaced by something else other than what was orginally referenced when link was created.
      li(style="font-weight:bold;") #[i.fa.fa-check.text-success] Everything might appear as intended and this warning is only causing confusion
      br
      br
      .text-muted ... and now you know, hopefully :)


.text-center
  h1.text-sm Mtg Aotp Card Manager
  p.text-muted
    |&nbsp;&nbsp;&nbsp;
    |Who's down with MTG? Aotp!

  div.text-muted(style="font-size:80%;")
    span(style="font-size:80%;")
      |This was all built & tested using Google Chrome&nbsp;
    .fa.fa-chrome
    br
    a.text-xs(href="https://github.com/AckerApple/mtg-aotp-card-manager" target="_blank" style="font-size:80%;") read the docs

  hr

  div(ng-show="cardCreator.series.hasRefs" style="position:absolute;right:1%")
    .btn.btn-xs.btn-warning(ng-click="cardCreator.showRefWarning=true")
      .fa.fa-exclamation-triangle
      |&nbsp;
      .fa.fa-unlink

  .text-center(style="padding-top:1em;")
    div(style="max-width:900px;margin-left:auto;margin-right:auto;")
      .row(style="margin:0 0 1em 0;")
        .animate-v.col-xs-12.col-sm-6(style="vertical-align:middle;padding:0;margin:0;")
          .text-center.text-xs
            .text-center(style="display:inline-block;margin:1%;")
              //-edit series display & labels
              .animate-v.text-left(ng-show="cardCreator.editSeriesInfo")
                .pull-right
                  .fa.fa-times(style="cursor:pointer" ng-click="cardCreator.editSeriesInfo=false")

                .form-group
                  label Series Title
                  input.form-control(type="text" ng-model="cardCreator.series.name")

                .form-group
                  label Series Icon Class
                  .input-group
                    .input-group-addon
                      i(ng-class="cardCreator.series.symbolClass||'mi mi-planeswalk'" ng-click="cardCreator.cycleSeriesSymbol()")
                    input.form-control(type="text" ng-model="cardCreator.series.symbolClass")

                .form-group.pull-left(style="width:50%;padding-right:3px;")
                  label Description
                  -ngModel="cardCreator.series.description"
                  input.input-xs.form-control(type="text" ng-model=ngModel)

                .form-group.pull-left(style="width:50%;")
                  label Small Origin Text #[sup &copy;]
                  -ngModel="cardCreator.series.copyRight"
                  input.text-xs.input-xs.form-control(type="text" ng-model=ngModel)

                .form-group
                  label
                    |Abilities Class&nbsp;
                    i.fa.fa-info-circle(onclick="alert('The original AOTP abilities font sizing, varies from Battle of Zendakar and later series. This is a control for that font variance.')")
                  -ngModel="cardCreator.series.abilitiesClass"
                  input.text-xs.input-xs.form-control(type="text" ng-model=ngModel placeholder="none or aotp-original")


              //-Series display & labels
              div(ng-hide="cardCreator.editSeriesInfo" ng-click="cardCreator.editSeriesInfo=true" style="cursor:pointer;")
                h2(style="margin:0;" title=title id="seriesTitle")
                  i(ng-class="cardCreator.series.symbolClass||'mi mi-planeswalk'")
                  |&nbsp;
                  span(style="vertical-align:top;display:inline-block;")
                    |{{cardCreator.series.name}}
                div
                  .text-muted(style="font-size:0.9em;line-height:2;margin-bottom:.2em;")
                    div(style="display:inline-block;") {{cardCreator.series.description||'Get ready to describe your awesomeness'}}
                div
                  .text-muted(style="font-size:0.6em;line-height:1;margin-bottom:.5em;")
                    div(style="display:inline-block;" ng-hide="editSeriesCopyRight" ng-click="editSeriesCopyRight=editSeriesCopyRight?false:true" ng-bind-html="cardCreator.series.copyRight||'&copy; copyrights are holding us back 2016'|trustAsHtml")

        .col-xs-12.col-sm-6(style="vertical-align:middle;padding:0;margin:0;")
          .text-center
            .text-center(style="display:inline-block;")
              //-Series & card editors
              div(style="margin-bottom:4%;")
                .btn-default.btn.btn-sm(style="width:80px" ng-click="cardCreator.mode='roster';" ng-class="{active:cardCreator.mode=='roster'}")
                  i.fa.fa-venus-mars
                  |&nbsp;roster
                |&nbsp;
                .btn-default.btn.btn-sm(style="width:80px" ng-click="cardCreator.mode='editor'" ng-class="{active:cardCreator.mode=='editor'}")
                  i.fa.fa-diamond
                  |&nbsp;editor
                |&nbsp;
                .btn-default.btn.btn-sm(style="width:80px" ng-click="cardCreator.mode='browse';" ng-class="{active:cardCreator.mode=='browse'}")
                  i.fa.fa-hand-pointer-o
                  |&nbsp;browse

              div
                .text-muted(style="font-weight:normal;font-size:65%;text-align:{{cardCreator.mode=='editor'?'left;':'center;'}}")
                  |series selector
                a.btn.btn-default(style="vertical-align:top;width:60px;margin-right:.5em;" ng-click="cardCreator.priorSeries()") &lt;&lt;
                .animate-h(style="display:inline-block;" ng-show="cardCreator.mode=='editor'")
                  a.btn.btn-default.btn-sm(style="width:35px" ng-click="cardCreator.priorCard()") &lt;
                  span(style="font-size:.8em;")
                    |&nbsp;&nbsp;
                    |{{cardCreator.selectedIndex+1}} of {{(cardCreator.series.data|keys).length}}
                    |&nbsp;&nbsp;
                  a.btn.btn-default.btn-sm(style="width:35px" ng-click="cardCreator.nextCard()") &gt;
                  .text-muted.text-center(style="font-weight:normal;font-size:55%;padding-bottom:4px;")
                    |card selector

                a.btn.btn-default(style="vertical-align:top;width:60px;margin-left:.5em;" ng-click="cardCreator.nextSeries()") &gt;&gt;

  .animate-v(ng-show="cardCreator.mode=='editor'")
    mtg-editor-view(series="cardCreator.series" card="cardCreator.card")

  .animate-v(ng-show="cardCreator.mode=='browse'")
    .animate-v.animate-fade(ng-repeat="card in cardCreator.series.data track by card.id" style="display:inline-block;cursor:pointer;margin:.5% .25%;")
      char-card(model="card" series="cardCreator.series" ng-click="cardCreator.previewCard=card")

  |{{cardCreator.previewCard.name}}
  .animate-v.text-center(ng-show="cardCreator.mode=='roster'")
    mtg-roster-view(series="cardCreator.series" card-click="cardCreator.previewCard=card" on-add="cardCreator.addCard()")

div(style="text-align:center;margin:1% 0;")
  div(style="display:inline-block;")
    .text-left
      .animate-v(ng-show="cardCreator.optionView=='export'" style="margin:2% 0;")
        h5(style="margin-top:0;") #[i.fa.fa-download] Exporting
        .animate-v(ng-show="cardCreator.export" style="margin:2% 0;")
          a.btn.btn-default(ng-href="{{cardCreator.export.data|jsonExportUrl}}" target="blank")
            i.fa.fa-eye
            |&nbsp;View {{cardCreator.export.name}}
          |&nbsp;
          a.btn.btn-default(download="{{cardCreator.export.name}}.json" ng-href="{{cardCreator.export.data|jsonExportUrl}}" target="blank")
            i.fa.fa-download
            |&nbsp;Download {{cardCreator.export.name}}
        a.btn.btn-default(ng-click="cardCreator.exportAll()" target="blank" style="margin:1% 0;width:125px")
          i.fa.fa-folder-open-o
          |&nbsp;export all
        |&nbsp;
        a.btn.btn-default(ng-click="cardCreator.createSeriesExport()" target="blank" style="margin:1% 0;width:125px")
          i.fa.fa-files-o
          |&nbsp;export series
        //-
          |&nbsp;
          a.animate-h.btn.btn-default(ng-show="cardCreator.card" ng-click="cardCreator.export={data:cardCreator.card, name:cardCreator.card.name}" target="blank" style="margin:1% 0;width:125px")
            i.fa.fa-file-o
            |&nbsp;export card

      .animate-v(ng-show="cardCreator.optionView=='import'" style="margin:2% 0;")
        h5 #[i.fa.fa-download] Importing
        .alert.alert-warning coming soon

        -attrs={}
        //-attrs['ngf-drop']="cardCreator.importSeries($file,editor.model)"
        //-attrs['ngf-drag-over-class']="'drop-over'"
        //-attrs['ngf-fix-orientation']="true"
        -attrs['ng-model']="file"
        -attrs['ngf-pattern']="'application/json'"
        -attrs['ngf-accept']="'application/json'"
        -attrs['ngf-max-size']="8MB"
        -attrs['ngf-select']="cardCreator.uploadSeries($file,file)"
        a.btn.btn-default(style="margin:1% 0;width:125px")&attributes(attrs)
          i.fa.fa-files-o
          |&nbsp;import series


    a.btn.btn-default(style="margin:1% 0;width:125px" ng-click="cardCreator.optionView='import'")
      i.fa.fa-upload
      |&nbsp;import options
    |&nbsp;
    a.btn.btn-success(style="margin:1% 0;width:125px" ng-click="cardCreator.addCard()")
      |+&nbsp;add card
    |&nbsp;
    a.btn.btn-default(style="margin:1% 0;width:125px" ng-click="cardCreator.optionView='export'")
      i.fa.fa-download
      |&nbsp;export options
    |&nbsp;
